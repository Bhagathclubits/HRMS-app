import{u as f,R as p,b as l,F as c,j as e,S as g,G as o,B as S,c as C,h as N,d as k,T}from"./index-391c2605.js";import{D as v,P as w}from"./PageHeader-c4ca6bf1.js";import{u as O,D as B}from"./DataGrid-12b03024.js";import"./Checkbox-2d029de5.js";const x=()=>{const y=f(),[t,m]=p.useState(`${new Date}`),[d,u]=p.useState(`${new Date}`),[a,h]=p.useState(1),[i,s]=p.useState(1),[n,L]=p.useState(0),[D,F]=p.useState("");console.log(t);const I=async()=>{try{await C.leave.set.mutate({noOfDays:n,fromDate:t,toDate:d,leaveTypeId:a,remarks:D,statusId:i})}catch(r){N(r,y)}},b={id:"create-leave",labelId:"create-leave-label"},A=r=>{s(r.target.value)},R=r=>{h(r.target.value)};return l(c,{children:[e(v.Trigger,{...b,variant:"primary",children:"Add Leave"}),l(v,{...b,children:[e(v.Header,{title:"Add Leave"}),e(v.Body,{children:e(g,{gap:"3",children:l(o.Row,{gutters:"3",children:[e(o.Col,{cols:["12","lg-6"],children:l("div",{className:"form-floating",children:[e("input",{type:"number",className:"form-control",value:n,onChange:r=>L(parseInt(r.target.value))}),e("label",{htmlFor:"NoOfDays",children:"No Of Days"})]})}),e(o.Col,{cols:["12","lg-6"],children:l("div",{className:"form-floating",children:[e("input",{type:"date",className:"form-control",value:t,onChange:r=>m(r.target.value)}),e("label",{htmlFor:"From Date",children:"From Date"})]})}),e(o.Col,{cols:["12","lg-6"],children:l("div",{className:"form-floating",children:[e("input",{type:"date",className:"form-control",value:d,onChange:r=>u(r.target.value)}),e("label",{htmlFor:"TO Date",children:"To Date"})]})}),e(o.Col,{cols:["12","lg-6"],children:l("div",{className:"form-floating",children:[l("select",{className:"form-control",value:i,onChange:r=>R(r),children:[e("option",{value:1,children:"Sick Leave"}),e("option",{value:2,children:"Casual Leave"})]}),e("label",{htmlFor:"Leave Type",children:"Leave Type"})]})}),e(o.Col,{cols:["12","lg-6"],children:l("div",{className:"form-floating",children:[e("input",{type:"text",className:"form-control",value:D,onChange:r=>F(r.target.value)}),e("label",{htmlFor:"Remarks",children:"Remarks"})]})}),e(o.Col,{cols:["12","lg-6"],children:l("div",{className:"form-floating",children:[l("select",{className:"form-control",value:i,onChange:r=>A(r),children:[e("option",{value:1,children:"Pending"}),e("option",{value:2,children:"Accepted"}),e("option",{value:3,children:"Rejected"})]}),e("label",{htmlFor:"Status",children:"Status"})]})})]})})}),l(v.Footer,{children:[e(S,{variant:"outline-primary","data-bs-toggle":"modal","data-bs-target":`#${b.id}`,children:"Cancel"}),e(S,{variant:"primary",onClick:I,"data-bs-toggle":"modal","data-bs-target":`#${b.id}`,children:"Submit"})]})]})]})},P=()=>{var m,d,u;const y=f(),t=O({load:async({states:a})=>{var h,i;try{const s={sortBy:(h=a.sortState)==null?void 0:h.sortBy,sortOrder:(i=a.sortState)==null?void 0:i.sortOrder,limit:a.paginationState.limit,page:a.paginationState.page};console.log({inputParameters:s});const n=await C.leave.getMany.mutate(s);return console.log({result:n}),{totalCount:n.totalCount,items:n.items}}catch(s){return N(s,y),{error:new Error("Something went wrong")}}}});return e(g,{gap:"3",children:e(k,{children:e(B,{...t,columns:[{id:"2",key:"",label:"Emp Name",renderCell:a=>e(c,{children:a.user.name})},{id:"3",key:"",label:"From Date",renderCell:a=>e(c,{children:new Intl.DateTimeFormat("en-US",{month:"numeric",year:"numeric",day:"numeric"}).format(new Date(a.fromDate))})},{id:"4",key:"todate",label:"To Date",renderCell:a=>e(c,{children:new Intl.DateTimeFormat("en-US",{month:"numeric",year:"numeric",day:"numeric"}).format(new Date(a.toDate))})},{id:"5",key:"",label:"Category",renderCell:a=>e(c,{children:a.leaveType.name})},{id:"6",key:"remarks",label:"Remarks"},{id:"7",key:"",label:"Status",renderCell:a=>e(T,{transform:"capitalize",color:a.status.name==="accepted"?"success":a.status.name==="rejected"?"danger":"warning",children:a.status.name}),sortOrder:((m=t.states.sortState)==null?void 0:m.sortBy)==="statusId"&&t.states.sortState.sortOrder?t.states.sortState.sortOrder:void 0,options:[{id:"1",as:"button",icon:"↑",label:"Sort by ASC",disabled:((d=t.states.sortState)==null?void 0:d.sortBy)==="statusId"&&t.states.sortState.sortOrder==="asc",onClick:()=>{t.dispatchers.sortDispatcher({type:"sort",payload:{sortBy:"statusId",sortOrder:"asc"}})}},{id:"2",as:"button",icon:"↓",label:"Sort by DESC",disabled:((u=t.states.sortState)==null?void 0:u.sortBy)==="status"&&t.states.sortState.sortOrder==="desc",onClick:()=>{t.dispatchers.sortDispatcher({type:"sort",payload:{sortBy:"status",sortOrder:"desc"}})}}]}]})})})},E=()=>{var m,d,u;const y=f(),t=O({load:async({states:a})=>{var h,i;try{const s={sortBy:(h=a.sortState)==null?void 0:h.sortBy,sortOrder:(i=a.sortState)==null?void 0:i.sortOrder,limit:a.paginationState.limit,page:a.paginationState.page};console.log({inputParameters:s});const n=await C.leave.getMany.mutate(s);return console.log({result:n}),{totalCount:n.totalCount,items:n.items}}catch(s){return console.log(s),N(s,y),{error:new Error("Something went wrong")}}}});return e(g,{gap:"3",children:e(k,{children:e(B,{...t,columns:[{id:"2",key:"",label:"Emp Name",renderCell:a=>e(c,{children:a.user.personalInfo?`${a.user.personalInfo.firstName} ${a.user.personalInfo.lastName}`:""}),sortOrder:((m=t.states.sortState)==null?void 0:m.sortBy)==="status"&&t.states.sortState.sortOrder?t.states.sortState.sortOrder:void 0,options:[{id:"1",as:"button",icon:"↑",label:"Sort by ASC",disabled:((d=t.states.sortState)==null?void 0:d.sortBy)==="status"&&t.states.sortState.sortOrder==="asc",onClick:()=>{t.dispatchers.sortDispatcher({type:"sort",payload:{sortBy:"status",sortOrder:"asc"}})}},{id:"2",as:"button",icon:"↓",label:"Sort by DESC",disabled:((u=t.states.sortState)==null?void 0:u.sortBy)==="status"&&t.states.sortState.sortOrder==="desc",onClick:()=>{t.dispatchers.sortDispatcher({type:"sort",payload:{sortBy:"status",sortOrder:"desc"}})}}]},{id:"3",key:"",label:"Leave Type",renderCell:a=>e(c,{children:a.leaveType.name})},{id:"4",key:"",label:"Available Units",renderCell:a=>e(c,{children:a.leaveType.daysAlloted})},{id:"5",key:"",label:"Balance Units",renderCell:a=>e(c,{children:Number(a.leaveType.daysAlloted)-Number(a.noOfDays)})},{id:"6",key:"",label:"Status",renderCell:a=>e(T,{transform:"capitalize",color:a.status.name==="accepted"?"success":a.status.name==="rejected"?"danger":"warning",children:a.status.name})}]})})})},z=()=>e(c,{children:l(g,{gap:"3",children:[l(o.Row,{children:[e(o.Col,{className:"py-2",cols:["12","md-2"],children:e("input",{type:"text",className:"form-control form-control-sm",placeholder:"From"})}),e(o.Col,{className:"py-2",cols:["12","md-2"],children:e("input",{type:"text",className:"form-control form-control-sm",placeholder:"To"})}),e(o.Col,{className:"py-2",cols:["12","md-2"],children:e("input",{type:"text",className:"form-control form-control-sm",placeholder:"Leave Type"})}),e(o.Col,{className:"py-2",cols:["12","md-2"],children:e(S,{variant:"primary",className:"w-100",children:"Search"})})]}),e(w,{title:e(w.Title,{}),actions:e(x,{})}),l("ul",{className:"nav nav-tabs",id:"myTab",role:"tablist",children:[e("li",{className:"nav-item",role:"presentation",children:e("button",{className:"nav-link active",id:"viewleave-tab","data-bs-toggle":"tab","data-bs-target":"#viewleave",type:"button",role:"tab","aria-controls":"viewleave","aria-selected":"true",children:"Leaves"})}),e("li",{className:"nav-item",role:"presentation",children:e("button",{className:"nav-link",id:"leavebalance-tab","data-bs-toggle":"tab","data-bs-target":"#leavebalance",type:"button",role:"tab","aria-controls":"leavebalance","aria-selected":"false",children:"Balance"})})]}),l("div",{className:"tab-content",id:"myTabContent",children:[e("div",{className:"tab-pane fade show active",id:"viewleave",role:"tabpanel","aria-labelledby":"viewleave-tab",children:e(P,{})}),e("div",{className:"tab-pane fade",id:"leavebalance",role:"tabpanel","aria-labelledby":"leavebalance-tab",children:e(E,{})})]})]})});export{z as LeaveTabs,z as default};
