import{u as k,R as o,c as h,b as a,F as u,j as e,S as y,G as r,T as n,B as R,h as W,e as G,A as q}from"./index-4bbca3b0.js";import{u as L,D as J}from"./DataGrid-87243675.js";import{P as D}from"./PageHeader-7a080ab0.js";import{D as g,a as K}from"./Dialog-227ac254.js";import{u as Q}from"./azure-blob-upload-6f1b270b.js";import"./Checkbox-ff3f9a33.js";const X=()=>{const b=k();o.useState("");const[p,l]=o.useState(""),[m,f]=o.useState(""),[s,d]=o.useState(),[c,v]=o.useState(),[N,O]=o.useState(""),[F,V]=o.useState(`${new Date}`),[T,H]=o.useState(`${new Date}`),[S,M]=o.useState(`${new Date}`),[B,U]=o.useState([]),[j,z]=o.useState([]),[w,A]=o.useState(""),[x,I]=o.useState(),[Y,P]=o.useState(!1),E=t=>{if(!t.target.files)return;const[i]=t.target.files;i&&I(i)},$=async()=>{try{if(!x)return;const{sasToken:t}=await h.sasToken.get.query();P(!0);const i=await Q(x,t);if(I(void 0),P(!1),s===void 0||c===void 0)return;await h.visitorPass.set.mutate({imageUrl:i,name:p,fromPlace:m,mobileNumber:N,hrId:s,companyId:c,date:F,inTime:T,outTime:S,reason:w})}catch(t){W(t,b)}},C={id:"create-info",labelId:"create-info-label"};return o.useEffect(()=>{(async()=>{const t=await h.company.getMany.query();U(t);const[i]=t;i!==void 0&&v(i.id)})()},[]),o.useEffect(()=>{(async()=>{try{if(c===void 0)return;const t=await h.hr.getMany.mutate({companyId:c});console.log(c),z(t)}catch{}})()},[c]),a(u,{children:[e(g.Trigger,{...C,variant:"primary",children:"Apply VisitorPass"}),a(g,{...C,children:[e(K,{title:"VisitorPass"}),e(g.Body,{children:e(y,{gap:"3",children:a(r.Row,{gutters:"3",children:[a(r.Col,{cols:["12","xl-12"],children:[e("label",{htmlFor:"Photo",children:e(n,{fontWeight:"bolder",children:"Photo"})}),e(y,{gap:"5",orientation:"vertical",children:a(r.Col,{cols:["12","lg-1"],children:[e("label",{style:{height:"100px",width:"100px",display:"flex",justifyContent:"space-evenly",alignItems:"center"},className:"form-control",htmlFor:"customFile",children:e("input",{type:"file",className:"form-control",onChange:E})}),e("input",{type:"file",style:{display:"none"},className:"form-control",id:"customFile"})]})})]}),a(r.Col,{cols:["12","lg-6"],children:[a("label",{htmlFor:"First Name",children:[e(n,{fontWeight:"bolder",children:"Visitor Name"})," "]}),e("div",{children:e("input",{type:"text",className:"form-control",id:"name",value:p,onChange:t=>l(t.target.value)})})]}),a(r.Col,{cols:["12","lg-6"],children:[e("label",{htmlFor:"Fromplace",children:e(n,{fontWeight:"bolder",children:"From Place"})}),e("div",{children:e("input",{type:"text",className:"form-control",id:"name",value:m,onChange:t=>f(t.target.value)})})]}),a(r.Col,{cols:["12","lg-6"],children:[e("label",{htmlFor:"username",children:e(n,{fontWeight:"bolder",children:"Company"})}),e("div",{children:a("select",{className:"form-control",value:c,onChange:t=>v(parseInt(t.target.value)),children:[e("option",{value:void 0,children:"Select Company"}),B.map((t,i)=>e("option",{value:t.id,children:t.name}))]})})]}),a(r.Col,{cols:["12","lg-6"],children:[e("label",{htmlFor:"username",children:e(n,{fontWeight:"bolder",children:"Hr"})}),e("div",{children:a("select",{className:"form-control",value:s,onChange:t=>d(parseInt(t.target.value)),children:[e("option",{value:void 0,children:"Select HR"}),j.map((t,i)=>e("option",{value:t.id,children:t.user.name}))]})})]}),a(r.Col,{cols:["12","lg-6"],children:[a("label",{htmlFor:"From date",children:[" ",e(n,{fontWeight:"bolder",children:"From date"})]}),e("div",{children:e("input",{type:"date",className:"form-control",value:F,onChange:t=>V(t.target.value)})})]}),a(r.Col,{cols:["12","lg-6"],children:[a("label",{htmlFor:"Mobilenumber",children:[" ",e(n,{fontWeight:"bolder",children:"Mobile Number"})]}),e("div",{children:e("input",{type:"text",className:"form-control",id:"name",value:N,onChange:t=>O(t.target.value)})})]}),a(r.Col,{cols:["12","lg-6"],children:[a("label",{htmlFor:"InTime",children:[" ",e(n,{fontWeight:"bolder",children:"In-Time"})]}),a("div",{className:"form-floating",children:[e("input",{type:"date-time",className:"form-control",value:T,onChange:t=>H(t.target.value)}),e("label",{htmlFor:"InTime",children:"In-Time"})]})]}),a(r.Col,{cols:["12","lg-6"],children:[e("label",{htmlFor:"OutTime",children:e(n,{fontWeight:"bolder",children:"Out-Time"})}),a("div",{className:"form-floating",children:[e("input",{type:"date-time",className:"form-control",value:S,onChange:t=>M(t.target.value)}),e("label",{htmlFor:"OutTime",children:"Out-Time"})]})]}),a(r.Col,{cols:["12","xl-12"],children:[a("label",{htmlFor:"floatingTextarea2",children:[" ",e(n,{fontWeight:"bolder",children:"Reason"})]}),e("div",{children:e("textarea",{className:"form-control",id:"floatingTextarea2",rows:2,value:w,onChange:t=>A(t.target.value)})})]})]})})}),e(g.Footer,{children:e("div",{style:{width:"100%",display:"flex",justifyContent:"space-evenly",alignItems:"center"},children:e(R,{variant:"primary",className:"center",onClick:$,"data-bs-toggle":"modal","data-bs-target":`#${C.id}`,children:"Confirm"})})})]})]})},re=()=>{const b=k(),p=L({load:async({states:l})=>{var m,f;try{const s={sortBy:(m=l.sortState)==null?void 0:m.sortBy,sortOrder:(f=l.sortState)==null?void 0:f.sortOrder,limit:l.paginationState.limit,page:l.paginationState.page};console.log({inputParameters:s});const d=await h.visitorPass.getMany.mutate(s);return console.log(d),{items:d.items,totalCount:d.totalCount}}catch(s){return W(s,b),{error:Error("Something went wrong")}}}});return e(u,{children:a(y,{gap:"3",children:[a(r.Row,{children:[e(r.Col,{className:"py-2",cols:["12","md-2"],children:e("input",{type:"text",className:"form-control form-control-sm",placeholder:"Visitor Name"})}),e(r.Col,{className:"py-2",cols:["12","md-2"],children:e("input",{type:"text",className:"form-control form-control-sm",placeholder:"Visitor From"})}),e(r.Col,{className:"py-2",cols:["12","md-2"],children:e("input",{type:"text",className:"form-control form-control-sm",placeholder:"From Date"})}),a(r.Row,{children:[e(r.Col,{className:"py-2",cols:["12","md-2"],children:e("input",{type:"text",className:"form-control form-control-sm",placeholder:"In Time"})}),e(r.Col,{className:"py-2",cols:["12","md-2"],children:e("input",{type:"text",className:"form-control form-control-sm",placeholder:"Out Time"})}),e(r.Col,{className:"py-2",cols:["12","md-2"],children:e(R,{variant:"primary",className:"w-100",children:"Search"})})]})]}),e(D,{title:e(D.Title,{}),actions:e(X,{})}),e(G,{children:e(J,{...p,columns:[{id:"1",key:"",label:"Visitor Image",renderCell:l=>e(y,{alignItems:"center",children:e(q,{src:l.imageUrl,variant:"circle",className:"overflow-hidden"})})},{id:"2",key:"name",label:"Name",renderCell:l=>e(n,{transform:"capitalize",children:l.name})},{id:"3",key:"fromPlace",label:"From Place",renderCell:l=>e(n,{transform:"capitalize",children:l.fromPlace})},{id:"4",key:"",label:"Company Name",renderCell:l=>e(n,{transform:"capitalize",children:l.companies.name})},{id:"5",key:"",label:"HR Name",renderCell:l=>e(n,{transform:"capitalize",children:l.hr.user.name})},{id:"6",key:"mobileNumber",label:"Mobile Number"},{id:"7",key:"",label:"Date",renderCell:l=>e(u,{children:l.date?new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric"}).format(new Date(l.date)):""})},{id:"8",key:"",label:"InTime",renderCell:l=>e(u,{children:new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric"}).format(new Date(l.inTime))})},{id:"9",key:"",label:"OutTime",renderCell:l=>e(u,{children:l.outTime!==null?new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric"}).format(new Date(l.outTime)):""})},{id:"10",key:"reason",label:"Reason",renderCell:l=>e(n,{transform:"capitalize",children:l.reason})}]})})]})})};export{re as default};
