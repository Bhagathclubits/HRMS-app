import{j as e,l as S,u as T,R as u,c as y,b as s,F as c,S as N,G as o,B as f,h as v,e as D,T as I}from"./index-4bbca3b0.js";import{u as B,D as P}from"./DataGrid-87243675.js";import{P as b}from"./PageHeader-7a080ab0.js";import{D as h}from"./Dialog-227ac254.js";import"./Checkbox-ff3f9a33.js";const $="badge mb-0 ",F={primary:"text-bg-primary",secondary:"text-bg-secondary",success:"text-bg-success",danger:"text-bg-danger",warning:"text-bg-warning",info:"text-bg-info",light:"text-bg-light",dark:"text-bg-dark"},R={topRight:"position-absolute top-0 start-100 translate-middle",topLeft:"position-absolute top-0 start-0 translate-middle",topCenter:"position-absolute top-0 start-50 translate-middle",leftCenter:"position-absolute top-50 start-0 translate-middle",rightCenter:"position-absolute top-50 start-100 translate-middle",middleCenter:"position-absolute top-50 start-50 translate-middle",bottomLeft:"position-absolute top-100 start-0 translate-middle",bottomCenter:"position-absolute top-100 start-50 translate-middle",bottomRight:"position-absolute top-100 start-100 translate-middle"},O="rounded-pill",U=n=>`${$}  ${F[n.textBackground]} ${n.className} ${n.roundedPill&&O} ${R[n.position]}`,A=n=>{const l={...n};return delete l.textBackground,delete l.roundedPill,delete l.position,n.position!==void 0&&console.warn("Make sure this component's parent element has position-relative in its className"),e(S,{as:"div","aria-label":"badge",children:e(S,{as:"div",...l,className:U(n)})})},E=()=>{const n=T(),[l,t]=u.useState(`${new Date}`),[m,p]=u.useState(`${new Date}`),[i,d]=u.useState(),[k,w]=u.useState([]),x=async()=>{try{if(i===void 0)return;await y.timeSheet.set.mutate({inTime:l,outTime:m,statusId:i})}catch(a){v(a,n)}},g={id:"create-payroll",labelId:"create-payroll-label"};return u.useEffect(()=>{(async()=>{const a=await y.timeSheetStatus.getMany.query();w(a);const[C]=a;C!==void 0&&d(C.id)})()},[]),s(c,{children:[e(h.Trigger,{...g,variant:"primary",children:"Add Timesheet"}),s(h,{...g,children:[e(h.Header,{title:"Add Timesheet"}),e(h.Body,{children:s(N,{gap:"3",children:[s(o.Row,{gutters:"3",children:[e(o.Col,{cols:["12","lg-6"],children:s("div",{className:"form-floating",children:[e("input",{type:"date-time",className:"form-control",value:l,onChange:a=>t(a.target.value)}),e("label",{htmlFor:"InTime",children:"Check IN"})]})}),e(o.Col,{cols:["12","lg-6"],children:s("div",{className:"form-floating",children:[e("input",{type:"date-time",className:"form-control",value:m,onChange:a=>p(a.target.value)}),e("label",{htmlFor:"OutTime",children:"Check OUT"})]})}),e(o.Col,{cols:["12","lg-6"],children:s("div",{className:"form-floating",children:[e("select",{className:"form-control",value:i,onChange:a=>d(parseInt(a.target.value)),children:k.map(a=>e("option",{value:a.id,children:a.name}))}),e("label",{htmlFor:"Status",children:"Status"})]})})]}),e(o.Row,{gutters:"3"})]})}),s(h.Footer,{children:[e(f,{variant:"outline-primary","data-bs-toggle":"modal","data-bs-target":`#${g.id}`,children:"Cancel"}),e(f,{variant:"primary",onClick:x,"data-bs-toggle":"modal","data-bs-target":`#${g.id}`,children:"Submit"})]})]})]})},r={uid:"1",empcode:"1210",empname:"Vignesh S",attendancedate:"18/04/2023",checkin:"9.00 Am",checkout:"5.00 Pm",status:"P"},q=[r,{...r,uid:"2"},{...r,uid:"3"},{...r,uid:"4"},{...r,uid:"5"},{...r,uid:"6"},{...r,uid:"7"},{...r,uid:"8"},{...r,uid:"9"},{...r,uid:"10"},{...r,uid:"11"},{...r,uid:"12"},{...r,uid:"13"}],z=()=>{const n=T(),l=B({load:async({states:t})=>{var m,p;try{const i={sortBy:(m=t.sortState)==null?void 0:m.sortBy,sortOrder:(p=t.sortState)==null?void 0:p.sortOrder,limit:t.paginationState.limit,page:t.paginationState.page};console.log({inputParameters:i});const d=await y.timeSheet.getMany.mutate(i);return console.log({result:d}),{totalCount:d.totalCount,items:d.items}}catch(i){return v(i,n),{error:Error("Something went wrong")}}}});return s(N,{gap:"3",children:[s(o.Row,{children:[e(o.Col,{className:"py-2",cols:["12","md-2"],children:e("input",{type:"text",className:"form-control form-control-sm",placeholder:"Emp.Name"})}),e(o.Col,{className:"py-2",cols:["12","md-2"],children:e("input",{type:"text",className:"form-control form-control-sm",placeholder:"Date"})}),e(o.Col,{className:"py-2",cols:["12","md-2"],children:e("input",{type:"text",className:"form-control form-control-sm",placeholder:"Time"})}),e(o.Col,{className:"py-2",cols:["12","md-2"],children:e(f,{variant:"primary",className:"w-100",children:"Search"})})]}),e(b,{title:e(b.Title,{})}),e(b,{title:e(b.Title,{}),actions:e(E,{})}),e(D,{children:e(P,{...l,columns:[{id:"1",key:"userId",label:"Emp code",renderCell:t=>e(c,{children:t.user.id})},{id:"2",key:"",label:"Name",renderCell:t=>e(c,{children:t.user.personalInfo?`${t.user.personalInfo.firstName} ${t.user.personalInfo.lastName}`:""})},{id:"3",key:"",label:"Date",renderCell:t=>e(c,{children:t.inTime?new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric"}).format(new Date(t.inTime)):""})},{id:"4",key:"",label:"CheckIN",renderCell:t=>e(c,{children:t.inTime?new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric"}).format(new Date(t.inTime)):""})},{id:"5",key:"",label:"CheckOUT",renderCell:t=>e(c,{children:t.outTime?new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric"}).format(new Date(t.outTime)):""})},{id:"6",key:"",label:"Status",renderCell:t=>e(A,{textBackground:t.status.name==="present"?"success":t.status.name==="absent"?"danger":"warning",children:e(I,{transform:"capitalize",as:"span",children:t.status.name})})}]})})]})};export{z as TimeSheetPage,z as default,r as timeSheet,q as timeSheets};
