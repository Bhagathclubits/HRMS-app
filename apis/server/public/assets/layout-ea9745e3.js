import{u as f,R as p,b as r,F as c,j as e,S as g,G as n,B as S,c as C,h as N,d as T,T as k}from"./index-06dc0186.js";import{D as v,P as w}from"./PageHeader-66f595bc.js";import{u as O,D as B}from"./DataGrid-ba2da079.js";import"./Checkbox-ee961553.js";const x=()=>{const y=f(),[t,u]=p.useState(`${new Date}`),[m,h]=p.useState(`${new Date}`),[a,i]=p.useState(1),[s,o]=p.useState(1),[d,L]=p.useState(0),[D,F]=p.useState("");console.log(t);const I=async()=>{try{await C.leave.set.mutate({noOfDays:d,fromDate:t,toDate:m,leaveTypeId:a,remarks:D,statusId:s})}catch(l){N(l,y)}},b={id:"create-leave",labelId:"create-leave-label"},A=l=>{o(l.target.value)},R=l=>{i(l.target.value)};return r(c,{children:[e(v.Trigger,{...b,variant:"primary",children:"Apply Leave"}),r(v,{...b,children:[e(v.Header,{title:"Add Leave"}),e(v.Body,{children:e(g,{gap:"3",children:r(n.Row,{gutters:"3",children:[e(n.Col,{cols:["12","lg-6"],children:r("div",{className:"form-floating",children:[e("input",{type:"number",className:"form-control",value:d,onChange:l=>L(parseInt(l.target.value))}),e("label",{htmlFor:"NoOfDays",children:"No Of Days"})]})}),e(n.Col,{cols:["12","lg-6"],children:r("div",{className:"form-floating",children:[e("input",{type:"date",className:"form-control",value:t,onChange:l=>u(l.target.value)}),e("label",{htmlFor:"From Date",children:"From Date"})]})}),e(n.Col,{cols:["12","lg-6"],children:r("div",{className:"form-floating",children:[e("input",{type:"date",className:"form-control",value:m,onChange:l=>h(l.target.value)}),e("label",{htmlFor:"TO Date",children:"To Date"})]})}),e(n.Col,{cols:["12","lg-6"],children:r("div",{className:"form-floating",children:[r("select",{className:"form-control",value:s,onChange:l=>R(l),children:[e("option",{value:1,children:"Sick Leave"}),e("option",{value:2,children:"Casual Leave"})]}),e("label",{htmlFor:"Leave Type",children:"Leave Type "})]})}),e(n.Col,{cols:["12","lg-6"],children:r("div",{className:"form-floating",children:[e("input",{type:"text",className:"form-control",value:D,onChange:l=>F(l.target.value)}),e("label",{htmlFor:"Remarks",children:"Remarks"})]})}),e(n.Col,{cols:["12","lg-6"],children:r("div",{className:"form-floating",children:[r("select",{className:"form-control",value:s,onChange:l=>A(l),children:[e("option",{value:1,children:"Pending"}),e("option",{value:2,children:"Accepted"}),e("option",{value:3,children:"Rejected"})]}),e("label",{htmlFor:"Status",children:"Status"})]})})]})})}),r(v.Footer,{children:[e(S,{variant:"outline-primary","data-bs-toggle":"modal","data-bs-target":`#${b.id}`,children:"Cancel"}),e(S,{variant:"primary",onClick:I,"data-bs-toggle":"modal","data-bs-target":`#${b.id}`,children:"Submit"})]})]})]})},E=()=>{var u,m,h;const y=f(),t=O({load:async({states:a})=>{var i,s;try{const o={sortBy:(i=a.sortState)==null?void 0:i.sortBy,sortOrder:(s=a.sortState)==null?void 0:s.sortOrder,limit:a.paginationState.limit,page:a.paginationState.page};console.log({inputParameters:o});const d=await C.leave.getMany.mutate(o);return console.log({result:d}),{totalCount:d.totalCount,items:d.items}}catch(o){return N(o,y),{error:new Error("Something went wrong")}}}});return e(g,{gap:"3",children:e(T,{children:e(B,{...t,columns:[{id:"1",key:"",label:"Empcode",renderCell:a=>e(c,{children:a.user.id})},{id:"2",key:"",label:"Emp Name",renderCell:a=>{var i,s;return r(c,{children:[(i=a.user.personalInfo)==null?void 0:i.firstName," ",(s=a.user.personalInfo)==null?void 0:s.lastName]})}},{id:"3",key:"",label:"Requested On",renderCell:a=>r(c,{children:[" ",new Intl.DateTimeFormat("en-US",{month:"numeric",year:"numeric",day:"numeric"}).format(new Date(a.createdAt))]})},{id:"4",key:"",label:"Leave Type",renderCell:a=>e(c,{children:a.leaveType.name})},{id:"5",key:"",label:"From",renderCell:a=>e(c,{children:new Intl.DateTimeFormat("en-US",{month:"numeric",year:"numeric",day:"numeric"}).format(new Date(a.fromDate))})},{id:"6",key:"todate",label:"To",renderCell:a=>e(c,{children:new Intl.DateTimeFormat("en-US",{month:"numeric",year:"numeric",day:"numeric"}).format(new Date(a.toDate))})},{id:"7",key:"noOfDays",label:"Days"},{id:"8",key:"",label:"Status",renderCell:a=>e(k,{transform:"capitalize",color:a.status.name==="accepted"?"success":a.status.name==="rejected"?"danger":"warning",children:a.status.name}),sortOrder:((u=t.states.sortState)==null?void 0:u.sortBy)==="statusId"&&t.states.sortState.sortOrder?t.states.sortState.sortOrder:void 0,options:[{id:"1",as:"button",icon:"↑",label:"Sort by ASC",disabled:((m=t.states.sortState)==null?void 0:m.sortBy)==="statusId"&&t.states.sortState.sortOrder==="asc",onClick:()=>{t.dispatchers.sortDispatcher({type:"sort",payload:{sortBy:"statusId",sortOrder:"asc"}})}},{id:"2",as:"button",icon:"↓",label:"Sort by DESC",disabled:((h=t.states.sortState)==null?void 0:h.sortBy)==="status"&&t.states.sortState.sortOrder==="desc",onClick:()=>{t.dispatchers.sortDispatcher({type:"sort",payload:{sortBy:"status",sortOrder:"desc"}})}}]}]})})})},P=()=>{var u,m,h;const y=f(),t=O({load:async({states:a})=>{var i,s;try{const o={sortBy:(i=a.sortState)==null?void 0:i.sortBy,sortOrder:(s=a.sortState)==null?void 0:s.sortOrder,limit:a.paginationState.limit,page:a.paginationState.page};console.log({inputParameters:o});const d=await C.leave.getMany.mutate(o);return console.log({result:d}),{totalCount:d.totalCount,items:d.items}}catch(o){return console.log(o),N(o,y),{error:new Error("Something went wrong")}}}});return e(g,{gap:"3",children:e(T,{children:e(B,{...t,columns:[{id:"2",key:"",label:"Emp Name",renderCell:a=>e(c,{children:a.user.personalInfo?`${a.user.personalInfo.firstName} ${a.user.personalInfo.lastName}`:""}),sortOrder:((u=t.states.sortState)==null?void 0:u.sortBy)==="status"&&t.states.sortState.sortOrder?t.states.sortState.sortOrder:void 0,options:[{id:"1",as:"button",icon:"↑",label:"Sort by ASC",disabled:((m=t.states.sortState)==null?void 0:m.sortBy)==="status"&&t.states.sortState.sortOrder==="asc",onClick:()=>{t.dispatchers.sortDispatcher({type:"sort",payload:{sortBy:"status",sortOrder:"asc"}})}},{id:"2",as:"button",icon:"↓",label:"Sort by DESC",disabled:((h=t.states.sortState)==null?void 0:h.sortBy)==="status"&&t.states.sortState.sortOrder==="desc",onClick:()=>{t.dispatchers.sortDispatcher({type:"sort",payload:{sortBy:"status",sortOrder:"desc"}})}}]},{id:"3",key:"",label:"Leave Type",renderCell:a=>e(c,{children:a.leaveType.name})},{id:"4",key:"",label:"Available Units",renderCell:a=>e(c,{children:a.leaveType.daysAlloted})},{id:"5",key:"",label:"Balance Units",renderCell:a=>e(c,{children:Number(a.leaveType.daysAlloted)-Number(a.noOfDays)})},{id:"6",key:"",label:"Status",renderCell:a=>e(k,{transform:"capitalize",color:a.status.name==="accepted"?"success":a.status.name==="rejected"?"danger":"warning",children:a.status.name})}]})})})},z=()=>e(c,{children:r(g,{gap:"3",children:[r(n.Row,{children:[e(n.Col,{className:"py-2",cols:["12","md-2"],children:e("input",{type:"text",className:"form-control form-control-sm",placeholder:"From"})}),e(n.Col,{className:"py-2",cols:["12","md-2"],children:e("input",{type:"text",className:"form-control form-control-sm",placeholder:"To"})}),e(n.Col,{className:"py-2",cols:["12","md-2"],children:e("input",{type:"text",className:"form-control form-control-sm",placeholder:"Leave Type"})}),e(n.Col,{className:"py-2",cols:["12","md-2"],children:e(S,{variant:"primary",className:"w-100",children:"Search"})})]}),e(w,{title:e(w.Title,{}),actions:e(x,{})}),r("ul",{className:"nav nav-tabs",id:"myTab",role:"tablist",children:[e("li",{className:"nav-item",role:"presentation",children:e("button",{className:"nav-link active",id:"viewleave-tab","data-bs-toggle":"tab","data-bs-target":"#viewleave",type:"button",role:"tab","aria-controls":"viewleave","aria-selected":"true",children:"Leaves"})}),e("li",{className:"nav-item",role:"presentation",children:e("button",{className:"nav-link",id:"leavebalance-tab","data-bs-toggle":"tab","data-bs-target":"#leavebalance",type:"button",role:"tab","aria-controls":"leavebalance","aria-selected":"false",children:"Balance"})})]}),r("div",{className:"tab-content",id:"myTabContent",children:[e("div",{className:"tab-pane fade show active",id:"viewleave",role:"tabpanel","aria-labelledby":"viewleave-tab",children:e(E,{})}),e("div",{className:"tab-pane fade",id:"leavebalance",role:"tabpanel","aria-labelledby":"leavebalance-tab",children:e(P,{})})]})]})});export{z as LeaveTabs,z as default};
