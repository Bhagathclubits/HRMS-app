import{u as C,R as m,c as f,b as n,F as s,j as e,S as N,G as l,B as S,h as b,d as I,T as k}from"./index-e20a6fbb.js";import{u as F,D as x}from"./DataGrid-4b8db2de.js";import{P as g}from"./PageHeader-0a00bc30.js";import{D as d}from"./Dialog-28d74173.js";import"./Checkbox-2135657c.js";const P=()=>{const y=C(),[u,t]=m.useState(`${new Date}`),[c,h]=m.useState(`${new Date}`),[i,o]=m.useState(),[v,w]=m.useState([]),D=async()=>{try{if(i===void 0)return;await f.timeSheet.set.mutate({inTime:u,outTime:c,statusId:i})}catch(a){b(a,y)}},p={id:"create-payroll",labelId:"create-payroll-label"};return m.useEffect(()=>{(async()=>{const a=await f.timeSheetStatus.getMany.query();w(a);const[T]=a;T!==void 0&&o(T.id)})()},[]),n(s,{children:[e(d.Trigger,{...p,variant:"primary",children:"Add Timesheet"}),n(d,{...p,children:[e(d.Header,{title:"Add Timesheet"}),e(d.Body,{children:n(N,{gap:"3",children:[n(l.Row,{gutters:"3",children:[e(l.Col,{cols:["12","lg-6"],children:n("div",{className:"form-floating",children:[e("input",{type:"date-time",className:"form-control",value:u,onChange:a=>t(a.target.value)}),e("label",{htmlFor:"InTime",children:"Check IN"})]})}),e(l.Col,{cols:["12","lg-6"],children:n("div",{className:"form-floating",children:[e("input",{type:"date-time",className:"form-control",value:c,onChange:a=>h(a.target.value)}),e("label",{htmlFor:"OutTime",children:"Check OUT"})]})}),e(l.Col,{cols:["12","lg-6"],children:n("div",{className:"form-floating",children:[e("select",{className:"form-control",value:i,onChange:a=>o(parseInt(a.target.value)),children:v.map(a=>e("option",{value:a.id,children:a.name}))}),e("label",{htmlFor:"Status",children:"Status"})]})})]}),e(l.Row,{gutters:"3"})]})}),n(d.Footer,{children:[e(S,{variant:"outline-primary","data-bs-toggle":"modal","data-bs-target":`#${p.id}`,children:"Cancel"}),e(S,{variant:"primary",onClick:D,"data-bs-toggle":"modal","data-bs-target":`#${p.id}`,children:"Submit"})]})]})]})},r={uid:"1",empcode:"1210",empname:"Vignesh S",attendancedate:"18/04/2023",checkin:"9.00 Am",checkout:"5.00 Pm",status:"P"},B=[r,{...r,uid:"2"},{...r,uid:"3"},{...r,uid:"4"},{...r,uid:"5"},{...r,uid:"6"},{...r,uid:"7"},{...r,uid:"8"},{...r,uid:"9"},{...r,uid:"10"},{...r,uid:"11"},{...r,uid:"12"},{...r,uid:"13"}],E=()=>{const y=C(),u=F({load:async({states:t})=>{var c,h;try{const i={sortBy:(c=t.sortState)==null?void 0:c.sortBy,sortOrder:(h=t.sortState)==null?void 0:h.sortOrder,limit:t.paginationState.limit,page:t.paginationState.page};console.log({inputParameters:i});const o=await f.timeSheet.getMany.mutate(i);return console.log({result:o}),{totalCount:o.totalCount,items:o.items}}catch(i){return b(i,y),{error:Error("Something went wrong")}}}});return n(N,{gap:"3",children:[n(l.Row,{children:[e(l.Col,{className:"py-2",cols:["12","md-2"],children:e("input",{type:"text",className:"form-control form-control-sm",placeholder:"Emp.Name"})}),e(l.Col,{className:"py-2",cols:["12","md-2"],children:e("input",{type:"text",className:"form-control form-control-sm",placeholder:"Date"})}),e(l.Col,{className:"py-2",cols:["12","md-2"],children:e("input",{type:"text",className:"form-control form-control-sm",placeholder:"Time"})}),e(l.Col,{className:"py-2",cols:["12","md-2"],children:e(S,{variant:"primary",className:"w-100",children:"Search"})})]}),e(g,{title:e(g.Title,{})}),e(g,{title:e(g.Title,{}),actions:e(P,{})}),e(I,{children:e(x,{...u,columns:[{id:"1",key:"userId",label:"Emp code",renderCell:t=>e(s,{children:t.user.id})},{id:"2",key:"",label:"Name",renderCell:t=>e(s,{children:t.user.personalInfo?`${t.user.personalInfo.firstName} ${t.user.personalInfo.lastName}`:""})},{id:"3",key:"",label:"Date",renderCell:t=>e(s,{children:t.inTime?new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric"}).format(new Date(t.inTime)):""})},{id:"4",key:"",label:"CheckIN",renderCell:t=>e(s,{children:t.inTime?new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric"}).format(new Date(t.inTime)):""})},{id:"5",key:"",label:"CheckOUT",renderCell:t=>e(s,{children:t.outTime?new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric"}).format(new Date(t.outTime)):""})},{id:"6",key:"",label:"Status",renderCell:t=>e(k,{transform:"capitalize",color:t.status.name==="present"?"success":t.status.name==="absent"?"danger":"warning",children:t.status.name})}]})})]})};export{E as TimeSheetPage,E as default,r as timeSheet,B as timeSheets};
